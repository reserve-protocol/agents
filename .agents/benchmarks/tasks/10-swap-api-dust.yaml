id: "10"
title: "Swap API with Dust Handling"
difficulty: medium
persona: "DeFi developer — building an automated DTF minting service"

prompt: |
  Walk me through the Reserve swap API — what parameters does it take, how does
  dust handling work, what units is slippage in, and how do I get an executable
  transaction?

minimum_access_mode: llms_full_txt

ground_truth:
  required_facts:
    - id: F1
      fact: "Endpoint: GET /api/zapper/{chainId}/swap"
      source: "content/full/08-api.md § GET /api/zapper/{chainId}/swap"
      in_llms_txt: false
      in_llms_full_txt: true
    - id: F2
      fact: "Required parameters: chainId, tokenIn, tokenOut, amountIn (in wei), signer, slippage (in basis points)"
      source: "content/full/08-api.md § GET /api/zapper/{chainId}/swap"
      in_llms_txt: false
      in_llms_full_txt: true
    - id: F3
      fact: "Set trade=true to get an execution-ready unsigned transaction (to, data, value)"
      source: "content/full/08-api.md § GET /api/zapper/{chainId}/swap"
      in_llms_txt: false
      in_llms_full_txt: true
    - id: F4
      fact: "Dust array contains leftover basket tokens from DTF minting — each entry has token address, symbol, and amount in wei"
      source: "content/full/08-api.md § Dust"
      in_llms_txt: false
      in_llms_full_txt: true
    - id: F5
      fact: "dustValue field gives the total USD value of all dust tokens"
      source: "content/full/08-api.md § GET /api/zapper/{chainId}/swap"
      in_llms_txt: false
      in_llms_full_txt: true
    - id: F6
      fact: "Slippage is specified in basis points (100 = 1%)"
      source: "content/full/08-api.md § GET /api/zapper/{chainId}/swap"
      in_llms_txt: false
      in_llms_full_txt: true
    - id: F7
      fact: "Response includes approvalNeeded (boolean) and approvalAddress for ERC20 approve"
      source: "content/full/08-api.md § GET /api/zapper/{chainId}/swap"
      in_llms_txt: false
      in_llms_full_txt: true
    - id: F8
      fact: "Native token (ETH/BNB) uses sentinel address 0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE"
      source: "content/full/08-api.md § GET /api/zapper/{chainId}/swap"
      in_llms_txt: true
      in_llms_full_txt: true

  bonus_facts:
    - id: B1
      fact: "debug=true includes per-hop price impact breakdown in result.debug.priceImpactStats"
      source: "content/full/08-api.md § Debug mode"
    - id: B2
      fact: "skipSimulation and bypassCache are optional parameters"
      source: "content/full/08-api.md § GET /api/zapper/{chainId}/swap"

  disqualifying_errors:
    - "Slippage is specified as a percentage (e.g. 1 for 1%)"
    - "Slippage is specified as a decimal (e.g. 0.01 for 1%)"
    - "The API returns a signed transaction ready to broadcast"
    - "Dust handling is automatic and requires no client-side logic"

navigation:
  ideal_path:
    llms_txt: ["Read llms.txt § Reserve API", "Follow Swap/Zap link or call the example endpoint"]
    llms_full_txt: ["Read llms-full.txt § Reserve API § GET /api/zapper/{chainId}/swap"]
    source_repo: ["Read content/full/08-api.md"]
